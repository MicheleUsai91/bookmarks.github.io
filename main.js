const BOOKMARKS = {
    "books": [
        { "name": "Libgen", "link": "https://libgen.is" },
        { "name": "Sci-Hub", "link": "https://sci-hub.41610.org" },
        { "name": "Z-Library", "link": "https://z-lib.org" }
    ],
    "cloud": [
        { "name": "iCloud", "link": "https://beta.icloud.com" },
        { "name": "GDrive", "link": "https://drive.google.com/drive/u/0/my-drive" },
        { "name": "OneDrive", "link": "https://onedrive.live.com" }
    ],
    "manga": [
        { "name": "Bakemonogatari", "link": "https://mangakatana.com/manga/bakemonogatari-nishio-ishin.20047" },
        // {"name" : "Baki-Dou (2018)", "link" : "https://mangakatana.com/manga/baki-dou-2018.21422"},
        { "name": "Berserk", "link": "https://mangakatana.com/manga/berserk.1087" },
        { "name": "Boku no Hero Academia", "link": "https://mangakatana.com/manga/boku-no-hero-academia.551" },
        { "name": "Chainsaw Man", "link": "https://mangakatana.com/manga/chainsaw-man.21890" },
        { "name": "Guard Pass", "link": "https://mangakatana.com/manga/guard-pass.25929" },
        { "name": "Juujika no Rokunin", "link": "https://mangakatana.com/manga/juujika-no-rokunin.25073" },
        { "name": "Kengan Omega", "link": "https://mangakatana.com/manga/kengan-omega.22093" },
        { "name": "Made in Abyss", "link": "https://mangakatana.com/manga/made-in-abyss.1224" },
        { "name": "Nagatoro", "link": "https://mangakatana.com/manga/please-dont-bully-me-nagatoro.19551" },
        { "name": "Onepunch-Man", "link": "https://mangakatana.com/manga/onepunch-man.437" },
        { "name": "Sakamoto Days", "link": "https://mangakatana.com/manga/sakamoto-days.25740" }
    ],
    "p2p": [
        { "name": "FitGirl", "link": "https://www.1377x.to/user/FitGirl" },
        { "name": "NAHOMHD", "link": "https://www.1377x.to/user/NAHOMhd" }
    ],
    "poste": [
        { "name": "PEC Webmail", "link": "https://webmail.postecert.it/certmail/index-rui.jsp?v=3.0.86.0#" },
        { "name": "Poste Italiane", "link": "https://www.poste.it" }
    ],
    "personale": [
        { "name": "ACI", "link": "https://www.aci.it" },
        { "name": "Agenzia delle Entrate", "link": "https://www.agenziaentrate.gov.it/portale/home" },
        { "name": "Comune di Cagliari", "link": "https://www.comune.cagliari.it/portale" },
        { "name": "Il Portale dell'Automobilista", "link": "https://www.ilportaledellautomobilista.it/web/portale-automobilista/home" },
        { "name": "MyAnpal", "link": "https://myanpal.anpal.gov.it" },
        { "name": "Sardegna Lavoro", "link": "https://www.sardegnalavoro.it" }
    ],
    "resources": [
        { "name": "Advanced Bash-Scripting Guide", "link": "https://tldp.org/LDP/abs/html" },
        { "name": "Apple UI Design", "link": "https://developer.apple.com/design/human-interface-guidelines" },

        { "name": "DevDocs", "link": "https://devdocs.io" },
        { "name": "FullStack", "link": "https://fullstackopen.com/en" },
        { "name": "Must Read Books", "link": "https://www.reddit.com/r/learnprogramming/comments/83xyow/must_read_books" },
        { "name": "Palladium Magazin", "link": "https://www.palladiummag.com" },
        { "name": "Roadmap WebDev", "link": "https://github.com/kamranahmedse/developer-roadmap" },
        { "name": "PHP The Right Way", "link": "https://phptherightway.com" }
    ],
    "shopping": [
        { "name": "AliExpress", "link": "http://it.aliexpress.com" },
        { "name": "Amazon", "link": "http://www.amazon.it" },
        { "name": "ePrice", "link": "http://www.eprice.it" },
        { "name": "Mediaworld", "link": "http://www.mediaworld.it" },
        { "name": "Subito", "link": "http://www.subito.it" }
    ],
    "socials": [
        { "name": "LinkedIn", "link": "https://www.linkedin.com/feed" },
        { "name": "Telegram", "link": "https://web.telegram.org/#/login" },
        { "name": "Whatsapp", "link": "https://web.whatsapp.com" }
    ],
    "svago": [
        { "name": "Nexus Mods", "link": "https://www.nexusmods.com" },
        { "name": "Spotify", "link": "https://open.spotify.com" }
    ],
    "tools": [
        { "name": "Chat-GPT", "link": "https://chat.openai.com" },
        // {"name" : "Clean Installation", "link" : "C:/Users/Michele/Documents/Programmazione/Code/WebApp/CleanInstall/CleanInstall.html"},
        { "name": "ExRx", "link": "https://exrx.net" },
        { "name": "GitHub", "link": "https://github.com" },
        { "name": "HexEd", "link": "https://hexed.it" },
        { "name": "Overleaf", "link": "https://it.overleaf.com" },
        { "name": "Phind", "link": "https://www.phind.com" },
        { "name": "PHPInfo", "link": "http://localhost:4000/Documents/Programmazione/Code/WebApp/Startpage/Pages/PHPInfo.php" },
        { "name": "SpeedTest", "link": "https://librespeed.org" },
        { "name": "Tuxbell", "link": "http://tuxbell.com" },
        { "name": "Wiby", "link": "https://wiby.me" },
        { "name": "Wolfram|Alpha", "link": "https://www.wolframalpha.com" }
    ],
    "utility": [
        { "name": "Modem", "link": "http://192.168.1.1" },
        { "name": "PDFescape", "link": "http://www.pdfescape.com/open" },
        { "name": "Router", "link": "http://192.168.0.1/webpages/index.1476264749915.html" },
        { "name": "SketchUp", "link": "https://app.sketchup.com/app" }
    ],
    "work": [
        { "name": "Box", "link": "https://app.box.com/folder/0" },
        { "name": "Chime", "link": "https://app.chime.aws" },
        { "name": "Fondo EST", "link": "https://my.fondoest.it" },
        { "name": "GestioneVPN", "link": "https://app.box.com/s/2x6910n37g1ftl4xasq70lbowcevr6m" },
        { "name": "Odoo", "link": "https://pccube.odoo.com/web#cids=1&home=" },
        { "name": "Sconti Aziendali", "link": "https://pccube.convenzioniaziendali.it" },
        { "name": "Upwork", "link": "https://www.upwork.com" },
        { "name": "Webmail", "link": "https://webmailbeta.aruba.it" }
    ],
    "youtube": [
        { "name": "Youtube", "link": "https://www.youtube.com" },
        { "name": "Dictionary of Obscure Sorrows", "link": "https://www.youtube.com/c/obscuresorrows" },
        { "name": "DIY Perks", "link": "https://www.youtube.com/@DIYPerks" },
        { "name": "Isaac Arthur", "link": "https://www.youtube.com/@isaacarthur3209" },
        { "name": "Jack PGM", "link": "https://www.youtube.com/@JackPGM" },
        { "name": "JerryRigEverything", "link": "https://www.youtube.com/@JerryRigEverything" },
        { "name": "Kiwami Japan", "link": "https://www.youtube.com/channel/UCg3qsVzHeUt5_cPpcRtoaJQ" },
        { "name": "Kurzgesagt", "link": "https://www.youtube.com/@kurzgesagt" },
        { "name": "Linus Tech Tips", "link": "https://www.youtube.com/@LinusTechTips" },
        { "name": "MelodySheep", "link": "https://www.youtube.com/@melodysheep" },
        { "name": "PewDiePie", "link": "https://www.youtube.com/user/PewDiePie" },
        { "name": "ShortCircuit", "link": "https://www.youtube.com/@ShortCircuit" },
        { "name": "Steve1989MREInfo", "link": "https://www.youtube.com/channel/UC2I6Et1JkidnnbWgJFiMeHA" },
        { "name": "Stuff Made Here", "link": "https://www.youtube.com/@StuffMadeHere" },
        { "name": "Techquickie", "link": "https://www.youtube.com/@Techquickie" },
        { "name": "Veritasium", "link": "https://www.youtube.com/@veritasium" }
    ]
}

const REMINDERS = {
    "carte": [
        { "desc": "Banco Posta", "data": "2025-08-01" },
        { "desc": "Carta D'IdentitÃ ", "data": "2032-07-15" },
        { "desc": "Passaporto", "data": "2033-04-06" },
        { "desc": "Patente", "data": "2023-07-15" },
        { "desc": "Poste Pay", "data": "2026-05-01" },
        { "desc": "Tessera Sanitaria", "data": "2028-01-12" }
    ],
    "compleanni": [
        { "desc": "Anna Rita Sanna", "data": "1959-03-12" },
        { "desc": "Antonella Sanna", "data": "1956-04-18" },
        { "desc": "Elisa Raga", "data": "2000-08-31" },
        { "desc": "Luca Lecis", "data": "1991-02-13" },
        { "desc": "Michele Usai", "data": "1991-07-15" }
    ],
    "fisco": [
        { "desc": "730", "data": "2024-06-16" }
    ],
    "macchina": [
        { "desc": "Assicurazione", "data": "2023-07-13" },
        { "desc": "Bollo", "data": "2023-12-01" },
        { "desc": "Revisione", "data": "2025-05-01" }
    ],
    "poste": [
        { "desc": "Firma", "data": "2025-06-17" },
        { "desc": "PEC", "data": "2024-01-05" },
        { "desc": "SPID", "data": "2023-06-30" }
    ],
    "salute": [
        { "desc": "Certificato Medico", "data": "2024-07-13" }
    ],
}

function openAllPagesByName(name) {
    openUrls(getLinksList(document.getElementsByName(name)));
}

function openLinks() {
    const urls = ['https://web.whatsapp.com/', 'https://webmailbeta.aruba.it/', 'https://app.chime.aws/'];
    openUrls(urls);
}

function openUrls(array) {
    array.forEach(element => {
        window.open(element);
    });
}

function getLinksList(array) {
    var linksList = [];
    array.forEach(element => {
        linksList.push(element.attributes.href.nodeValue);
    });
    return linksList;
}

function showAccordion(value) {
    document.getElementById(value).hidden = !document.getElementById(value).hidden;
}

function dateDiff(date) {
    const currentDate = new Date();
    const parsedDate = new Date(date);
    return [
        currentDate.getFullYear() - parsedDate.getFullYear(),
        currentDate.getMonth() - parsedDate.getMonth(),
        currentDate.getDate() - parsedDate.getDate()
    ];
}

function showBookmarks() {
    const bookmarks = document.getElementById("bookmarks_list");

    Object.keys(BOOKMARKS).forEach(bookmark => {
        const bookmarkList = document.createElement("ul");
        const bookmarkTitle = document.createElement("h2");

        bookmarkTitle.textContent = bookmark;
        bookmarkTitle.setAttribute("onclick", `openAllPagesByName('${bookmark.toUpperCase()}')`);
        bookmarkList.appendChild(bookmarkTitle);

        BOOKMARKS[bookmark].forEach(b => {
            const bookmarkItem = document.createElement("li");
            const bookmarkLink = document.createElement("a");

            bookmarkLink.href = b.link;
            bookmarkLink.textContent = b.name;
            bookmarkLink.target = "_blank";
            bookmarkLink.setAttribute("name", bookmark.toUpperCase());

            bookmarkItem.appendChild(bookmarkLink);
            bookmarkList.appendChild(bookmarkItem);
        });
        bookmarks.appendChild(bookmarkList);
    });
}

function showReminders() {
    const col = ["DESC", "DATA", "Y-M-D"];
    const reminders = document.getElementById("reminders_list");
    const reminderList = document.createElement("ul");
    const table = document.createElement("table");
    const head = document.createElement("thead");
    const mainHeadRow = document.createElement("tr");
    col.forEach(c => {
        const header = document.createElement("th");
        header.textContent = c;
        mainHeadRow.appendChild(header);
    })
    head.appendChild(mainHeadRow);
    table.appendChild(head);

    Object.keys(REMINDERS).forEach(reminder => {
        const subHead = document.createElement("thead");
        const headRow = document.createElement("tr");
        const header = document.createElement("th");
        header.setAttribute("colspan", col.length);
        header.textContent = reminder;
        headRow.appendChild(header);
        subHead.appendChild(headRow);
        table.appendChild(subHead);
        
        const body = document.createElement("tbody");

        REMINDERS[reminder].forEach(r => {
            let data = dateDiff(r.data).map(value => Math.abs(value) < 10 ? "0" + Math.abs(value) : Math.abs(value));
            const bodyRow = document.createElement("tr");
            col.forEach(c => {
                const cell = document.createElement("td");
                cell.textContent = c !== "Y-M-D" ? r[c.toLowerCase()] : `${data[0]} - ${data[1]} - ${data[2]}`;
                cell.setAttribute("data-cell", c);
                bodyRow.appendChild(cell);
            })
            body.appendChild(bodyRow);
        });

        table.appendChild(body);
    });
    reminderList.appendChild(table);
    reminders.appendChild(reminderList);
}

document.addEventListener("DOMContentLoaded", function () {
    showBookmarks();
    showReminders();
})