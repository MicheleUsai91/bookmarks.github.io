const BOOKMARKS = {
    "Books" : [
        {"name" : "Libgen", "link" : "https://libgen.is/"},
        {"name" : "Sci-Hub", "link" : "https://sci-hub.41610.org/"},
        {"name" : "Z-Library", "link" : "https://z-lib.org/"}
    ],
    "Cloud" : [
        {"name" : "iCloud", "link" : "https://beta.icloud.com/"},
        {"name" : "GDrive", "link" : "https://drive.google.com/drive/u/0/my-drive"},
        {"name" : "OneDrive", "link" : "https://onedrive.live.com/"}
    ],
    "Manga" : [
        {"name" : "Bakemonogatari", "link" : "https://mangakatana.com/manga/bakemonogatari-nishio-ishin.20047"},
        // {"name" : "Baki-Dou (2018)", "link" : "https://mangakatana.com/manga/baki-dou-2018.21422"},
        {"name" : "Berserk", "link" : "https://mangakatana.com/manga/berserk.1087"},
        {"name" : "Boku no Hero Academia", "link" : "https://mangakatana.com/manga/boku-no-hero-academia.551"},
        {"name" : "Chainsaw Man", "link" : "https://mangakatana.com/manga/chainsaw-man.21890"},
        {"name" : "Guard Pass", "link" : "https://mangakatana.com/manga/guard-pass.25929"},
        {"name" : "Juujika no Rokunin", "link" : "https://mangakatana.com/manga/juujika-no-rokunin.25073"},
        {"name" : "Kengan Omega", "link" : "https://mangakatana.com/manga/kengan-omega.22093"},
        {"name" : "Made in Abyss", "link" : "https://mangakatana.com/manga/made-in-abyss.1224"},
        {"name" : "Nagatoro", "link" : "https://mangakatana.com/manga/please-dont-bully-me-nagatoro.19551"},
        {"name" : "Onepunch-Man", "link" : "https://mangakatana.com/manga/onepunch-man.437"},
        {"name" : "Sakamoto Days", "link" : "https://mangakatana.com/manga/sakamoto-days.25740"}
    ],
    "P2P" : [
        {"name" : "FitGirl", "link" : "https://www.1377x.to/user/FitGirl/"},
        {"name" : "NAHOMHD", "link" : "https://www.1377x.to/user/NAHOMhd/"}
    ],
    "Poste" : [
        {"name" : "PEC Webmail", "link" : "https://webmail.postecert.it/certmail/index-rui.jsp?v=3.0.86.0#/"},
        {"name" : "Poste Italiane", "link" : "https://www.poste.it/"}
    ],
    "Personale" : [
        {"name" : "ACI", "link" : "https://www.aci.it/"},
        {"name" : "Agenzia delle Entrate", "link" : "https://www.agenziaentrate.gov.it/portale/home/"},
        {"name" : "Comune di Cagliari", "link" : "https://www.comune.cagliari.it/portale/"},
        {"name" : "Il Portale dell'Automobilista", "link" : "https://www.ilportaledellautomobilista.it/web/portale-automobilista/home"},
        {"name" : "MyAnpal", "link" : "https://myanpal.anpal.gov.it/"},
        {"name" : "Sardegna Lavoro", "link" : "https://www.sardegnalavoro.it/"}
    ],
    "Resources" : [
        {"name" : "Advanced Bash-Scripting Guide", "link" : "https://tldp.org/LDP/abs/html/"},
        {"name" : "DevDocs", "link" : "https://devdocs.io/"},
        {"name" : "FullStack", "link" : "https://fullstackopen.com/en/"},
        {"name" : "Must Read Books", "link" : "https://www.reddit.com/r/learnprogramming/comments/83xyow/must_read_books/"},
        {"name" : "Palladium Magazin", "link" : "https://www.palladiummag.com/"},
        {"name" : "Roadmap WebDev", "link" : "https://github.com/kamranahmedse/developer-roadmap"},
        {"name" : "PHP The Right Way", "link" : "https://phptherightway.com/"}
    ],
    "Shopping" : [
        {"name" : "AliExpress", "link" : "http://it.aliexpress.com/"},
        {"name" : "Amazon", "link" : "http://www.amazon.it/"},
        {"name" : "ePrice", "link" : "http://www.eprice.it/"},
        {"name" : "Mediaworld", "link" : "http://www.mediaworld.it/"},
        {"name" : "Subito", "link" : "http://www.subito.it/"}
    ],
    "Socials" : [
        {"name" : "LinkedIn", "link" : "https://www.linkedin.com/feed/"},
        {"name" : "Telegram", "link" : "https://web.telegram.org/#/login"},
        {"name" : "Whatsapp", "link" : "https://web.whatsapp.com/"}
    ],
    "Svago" : [
        {"name" : "Nexus Mods", "link" : "https://www.nexusmods.com/"},
        {"name" : "Spotify", "link" : "https://open.spotify.com/"}
    ],
    "Tools" : [
        {"name" : "Chat-GPT", "link" : "https://chat.openai.com/"},
        // {"name" : "Clean Installation", "link" : "C:/Users/Michele/Documents/Programmazione/Code/WebApp/CleanInstall/CleanInstall.html"},
        {"name" : "ExRx", "link" : "https://exrx.net/"},
        {"name" : "GitHub", "link" : "https://github.com/"},
        {"name" : "HexEd", "link" : "https://hexed.it/"},
        {"name" : "Overleaf", "link" : "https://it.overleaf.com/"},
        {"name" : "Phind", "link" : "https://www.phind.com/"},
        {"name" : "PHPInfo", "link" : "http://localhost:4000/Documents/Programmazione/Code/WebApp/Startpage/Pages/PHPInfo.php"},
        {"name" : "SpeedTest", "link" : "https://librespeed.org/"},
        {"name" : "Tuxbell", "link" : "http://tuxbell.com/"},
        {"name" : "Wiby", "link" : "https://wiby.me/"},
        {"name" : "Wolfram|Alpha", "link" : "https://www.wolframalpha.com/"}
    ],
    "Utility" : [
        {"name" : "Modem", "link" : "http://192.168.1.1/"},
        {"name" : "PDFescape", "link" : "http://www.pdfescape.com/open/"},
        {"name" : "Router", "link" : "http://192.168.0.1/webpages/index.1476264749915.html"},
        {"name" : "SketchUp", "link" : "https://app.sketchup.com/app"}
    ],
    "Work" : [
        {"name" : "Box", "link" : "https://app.box.com/folder/0"},
        {"name" : "Chime", "link" : "https://app.chime.aws/"},
        {"name" : "Fondo EST", "link" : "https://my.fondoest.it/"},
        {"name" : "GestioneVPN", "link" : "https://app.box.com/s/2x6910n37g1ftl4xasq70lbowcevr6m"},
        {"name" : "Odoo", "link" : "https://pccube.odoo.com/web#cids=1&home="},
        {"name" : "Sconti Aziendali", "link" : "https://pccube.convenzioniaziendali.it/"},
        {"name" : "Upwork", "link" : "https://www.upwork.com/"},
        {"name" : "Webmail", "link" : "https://webmailbeta.aruba.it/"}
    ],
    "Youtube" : [
        {"name" : "Youtube", "link" : "https://www.youtube.com/"},
        {"name" : "Dictionary of Obscure Sorrows", "link" : "https://www.youtube.com/c/obscuresorrows"},
        {"name" : "DIY Perks", "link" : "https://www.youtube.com/@DIYPerks"},
        {"name" : "Isaac Arthur", "link" : "https://www.youtube.com/@isaacarthur3209"},
        {"name" : "Jack PGM", "link" : "https://www.youtube.com/@JackPGM"},
        {"name" : "JerryRigEverything", "link" : "https://www.youtube.com/@JerryRigEverything"},
        {"name" : "Kiwami Japan", "link" : "https://www.youtube.com/channel/UCg3qsVzHeUt5_cPpcRtoaJQ"},
        {"name" : "Kurzgesagt", "link" : "https://www.youtube.com/@kurzgesagt"},
        {"name" : "Linus Tech Tips", "link" : "https://www.youtube.com/@LinusTechTips"},
        {"name" : "MelodySheep", "link" : "https://www.youtube.com/@melodysheep"},
        {"name" : "PewDiePie", "link" : "https://www.youtube.com/user/PewDiePie"},
        {"name" : "ShortCircuit", "link" : "https://www.youtube.com/@ShortCircuit"},
        {"name" : "Steve1989MREInfo", "link" : "https://www.youtube.com/channel/UC2I6Et1JkidnnbWgJFiMeHA"},
        {"name" : "Stuff Made Here", "link" : "https://www.youtube.com/@StuffMadeHere"},
        {"name" : "Techquickie", "link" : "https://www.youtube.com/@Techquickie"},
        {"name" : "Veritasium", "link" : "https://www.youtube.com/@veritasium"}
    ]
}

const REMINDERS = {
    "Carte" : [
        {"title" : "Banco Posta", "data" : "2025-08-01"},
        {"title" : "Carta D'IdentitÃ ", "data" : "2032-07-15"},
        {"title" : "Passaporto", "data" : "2033-04-06"},
        {"title" : "Patente", "data" : "2023-07-15"},
        {"title" : "Poste Pay", "data" : "2026-05-01"},
        {"title" : "Tessera Sanitaria", "data" : "2028-01-12"}
    ],
    "Compleanno" : [
        {"title" : "Anna Rita Sanna", "data" : "1959-03-12"},
        {"title" : "Antonella Sanna", "data" : "1956-04-18"},
        {"title" : "Elisa Raga", "data" : "2000-08-31"},
        {"title" : "Luca Lecis", "data" : "1991-02-13"},
        {"title" : "Michele Usai", "data" : "1991-07-15"}
    ],
    "Fisco" : [
        {"title" : "730", "data" : "2024-06-16"}
    ],
    "Macchina" : [
        {"title" : "Assicurazione", "data" : "2023-07-13"},
        {"title" : "Bollo", "data" : "2023-12-01"},
        {"title" : "Revisione", "data" : "2025-05-01"}
    ],
    "Poste" : [
        {"title" : "Firma", "data" : "2025-06-17"},
        {"title" : "PEC", "data" : "2024-01-05"},
        {"title" : "SPID", "data" : "2023-06-30"}
    ],
    "Salute" : [
        {"title" : "Certificato Medico", "data" : "2024-07-13"}
    ],
}

function openAllPagesByName(name) {
    openUrls(getLinksList(document.getElementsByName(name)));
}

function openLinks() {
    const urls = ['https://web.whatsapp.com/', 'https://webmailbeta.aruba.it/', 'https://app.chime.aws/'];
    openUrls(urls);
}

function openUrls(array) {
    array.forEach(element => {
        window.open(element);
    });
}

function getLinksList(array) {
    var linksList = [];
    array.forEach(element => {
        linksList.push(element.attributes.href.nodeValue);
    });
    return linksList;
}

function showAccordion(value) {
    document.getElementById(value).hidden = !document.getElementById(value).hidden;
}

function dateDiff(date) {
    const currentDate = new Date();
    const parsedDate = new Date(date);
    return [
        currentDate.getFullYear() - parsedDate.getFullYear(),
        currentDate.getMonth() - parsedDate.getMonth(),
        currentDate.getDate() - parsedDate.getDate()
    ];
}

function showBookmarks() {
    const container = document.getElementById("bookmarks_list");

    for (const category in BOOKMARKS) {
        if (BOOKMARKS.hasOwnProperty(category)) {
            const categoryList = document.createElement("ul");
            const categoryTitle = document.createElement("h2");
            const line = document.createElement("hr");
            categoryTitle.textContent = category.toUpperCase();
            categoryTitle.setAttribute("onclick", "openAllPagesByName('" + category.toUpperCase() + "')");
            categoryList.appendChild(categoryTitle);
            categoryList.appendChild(line);

            for (const bookmark of BOOKMARKS[category]) {
                const bookmarkItem = document.createElement("li");
                const bookmarkLink = document.createElement("a");
                bookmarkLink.href = bookmark.link;
                bookmarkLink.textContent = bookmark.name;
                bookmarkLink.target = "_blank";
                bookmarkLink.setAttribute("name", category.toUpperCase());
                bookmarkItem.appendChild(bookmarkLink);
                categoryList.appendChild(bookmarkItem);
            }
            container.appendChild(categoryList);
        }
    }
}

function showReminders() {
    const container = document.getElementById("reminders_list");
    
    for (const category in REMINDERS) {
        if (REMINDERS.hasOwnProperty(category)) {
            const categoryList = document.createElement("ul");
            const categoryTitle = document.createElement("h2");
            const line = document.createElement("hr");
            categoryTitle.textContent = category.toUpperCase();
            categoryList.appendChild(categoryTitle);
            categoryList.appendChild(line);

            const table = document.createElement("table");
            const head = document.createElement("thead");
            const headRow = document.createElement("tr");
            const body = document.createElement("tbody");

            const headTitle = document.createElement("th");
            headTitle.textContent = "DESCRIZIONE";
            headRow.appendChild(headTitle);

            const headDate = document.createElement("th");
            headDate.textContent = "DATA";
            headRow.appendChild(headDate);

            const headResult = document.createElement("th");
            headResult.textContent = category.toUpperCase() === "COMPLEANNO" ? "ETA" : "COUNTDOWN";
            headRow.appendChild(headResult);

            head.appendChild(headRow);
            table.appendChild(head);

            for (const reminder of REMINDERS[category]) {
                const bodyRow = document.createElement("tr");

                const bodyTitle = document.createElement("th");
                bodyTitle.textContent = reminder.title;
                bodyRow.appendChild(bodyTitle);
    
                const bodyDate = document.createElement("th");
                bodyDate.textContent = reminder.data;
                bodyRow.appendChild(bodyDate);
    
                const bodyResult = document.createElement("th");
                let data = dateDiff(reminder.data);
                for (var i=0; i<data.length; i++) {
                    data[i] = Math.abs(data[i]) < 10 ? "0" + Math.abs(data[i]) : Math.abs(data[i])
                }

                //TO-DO -> trasformare la riga in una sotto tabella
                bodyResult.textContent = "Y " + data[0] + " | M " + data[1] + " | D " + data[2];
                bodyRow.appendChild(bodyResult);

                body.appendChild(bodyRow);
            }
            table.appendChild(body);
            categoryList.appendChild(table);
            container.appendChild(categoryList);
        }
    }
}

document.addEventListener("DOMContentLoaded", function () {
    showBookmarks();
    showReminders();
})